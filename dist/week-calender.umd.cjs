(function(u,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(u=typeof globalThis<"u"?globalThis:u||self,e(u.WeekCalender={},u.Vue))})(this,function(u,e){"use strict";var E=document.createElement("style");E.textContent=`.time-grid[data-v-415fe264]{user-select:none;cursor:pointer;float:left;border-right:1px solid #fff;border-bottom:1px solid #fff;width:13px;height:35px}.time-grid.active[data-v-415fe264]{background-color:#6997f3!important}.time-calender-container[data-v-3b14c67e]{width:706px}.time-calender-container *[data-v-3b14c67e]{box-sizing:border-box}.time-calender-container .row[data-v-3b14c67e]{display:flex}.time-calender-container .row.middle[data-v-3b14c67e]{align-items:middle}.time-calender-container .row.between[data-v-3b14c67e]{justify-content:space-between}.time-calender-container .row .col.none[data-v-3b14c67e]{flex:none}.time-calender-container .row .col.auto[data-v-3b14c67e]{flex:auto}.text-center[data-v-3b14c67e]{text-align:center}.time-calender[data-v-3b14c67e]{border:1px solid #ccc;width:100%}.time-calender .info-grid[data-v-3b14c67e]{font-size:13px;color:#888}.time-calender .header-info[data-v-3b14c67e]{display:flex;width:100%}.time-calender .header-info .week-label[data-v-3b14c67e]{flex:0 0 80px;height:50px;line-height:50px;border-right:1px solid #ccc}.time-calender .header-info .time-label-container[data-v-3b14c67e]{float:left;border-top:1px solid #ccc;border-bottom:1px solid #ccc}.time-calender .header-info .time-label-container .time-label[data-v-3b14c67e]{float:left;width:26px;height:16px;line-height:16px;font-size:13px;color:#333}.time-calender .header-info .info-grid-container[data-v-3b14c67e]{display:flex;flex-flow:row wrap}.time-calender .header-info .info-grid-container .time-info[data-v-3b14c67e]{flex:1;width:50%;height:32px;line-height:32px}.time-calender .header-info .info-grid-container .time-info[data-v-3b14c67e]:first-child{border-right:1px solid #ccc}.time-calender .time-container[data-v-3b14c67e]{flex:1;display:flex;justify-content:flex-start;align-items:flex-start}.time-calender .time-container .week-label-container[data-v-3b14c67e]{flex:0 0 80px}.time-calender .time-container .week-label-container .week-label[data-v-3b14c67e]{height:35px;line-height:35px;border-right:1px solid #ccc;border-top:1px solid #ccc}.time-calender .time-container .time-grid-container[data-v-3b14c67e]{position:relative}.time-calender .time-container .time-grid-container .tooltip[data-v-3b14c67e]{position:fixed;z-index:2;left:var(--e01fbdd0);top:var(--4ef75a24);border-radius:4px;border:1px solid #ccc;padding:2px 4px;box-shadow:2px 2px 2px #ccc;background-color:#fff!important}.time-calender .time-container .time-grid-container .tooltip .label[data-v-3b14c67e]{position:relative;z-index:2}.time-calender .time-container .time-grid-container .tooltip .arrow[data-v-3b14c67e]{position:absolute;bottom:-5px;left:50%;margin-left:-5px;width:10px;height:10px;transform:rotate(45deg);box-shadow:2px 2px 2px #ccc;background:#fff;transform-origin:center center}.time-calender .time-container .time-grid-container .time-grid[data-v-3b14c67e]{z-index:1;position:relative}.time-calender .time-container .time-grid-container .time-grid[data-v-3b14c67e]:nth-child(even){background-color:#f0f1f2}.time-calender .time-container .time-grid-container .time-grid[data-v-3b14c67e]:nth-child(odd){background-color:#f8f9fa}.tip-container .demo-time-grid[data-v-3b14c67e]{background-color:#f0f1f2;vertical-align:text-top;width:16px;height:16px;line-height:16px;display:inline-block;user-select:none;cursor:pointer}.tip-container .demo-time-grid.active[data-v-3b14c67e]{background-color:#6997f3}
`,document.head.appendChild(E);const C=["星期一","星期二","星期三","星期四","星期五","星期六","星期日"],F=Array.from({length:24}).map((t,o)=>o),b=48,y="0".repeat(b*7),A=y.split("");function W(t){const o=t/2;return t%2===0?`${w(o)}:00 ~ ${w(o)}:30`:`${w(Math.floor(o))}:30 ~ ${w(Math.ceil(o))}:00`}function D(t){const o=Math.floor(t/b)+1,c=W(t%b);return`${C[o-1]} - ${c}`}function w(t){return t<10?`0${t}`:t}function B(t){const o=Math.floor(t/b);return{row:o,col:t-o*b}}const k={row:void 0,col:void 0},O=e.defineComponent({name:"WeekCalenderGrid",props:{id:{type:Number,required:!0},selected:{type:Array,default:[]}},emits:["mouseOver","mouseDown","mouseOut","mouseUp","click"],setup(t,{emit:o}){const c=e.computed(()=>t.selected.includes(t.id));function r(n,_){const m=n.target.getBoundingClientRect(),g={left:m.left-75+6+"px",top:m.top-window.screenTop-35-5+"px"};o("mouseOver",_,g)}function s(){o("mouseOut")}function f(n){o("mouseDown",n)}function l(n){o("mouseUp",n)}function a(n){o("click",n)}return{isActive:c,handleMouseout:s,handleMouseover:r,handleMousedown:f,handleMouseup:l,handleClick:a}}}),ue="",$=(t,o)=>{const c=t.__vccOpts||t;for(const[r,s]of o)c[r]=s;return c};function z(t,o,c,r,s,f){return e.openBlock(),e.createElementBlock("div",{onMousedown:o[0]||(o[0]=l=>t.handleMousedown(t.$props.id)),onMouseover:o[1]||(o[1]=l=>t.handleMouseover(l,t.$props.id)),onMouseout:o[2]||(o[2]=(...l)=>t.handleMouseout&&t.handleMouseout(...l)),onMouseup:o[3]||(o[3]=l=>t.handleMouseup(t.$props.id)),onClick:o[4]||(o[4]=l=>t.handleClick(t.$props.id)),class:e.normalizeClass(["time-grid",{active:t.isActive}])},null,34)}const V=$(O,[["render",z],["__scopeId","data-v-415fe264"]]),M=e.defineComponent({name:"WeekCalender",props:{value:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["update:value","change"],components:{WeekCalenderGrid:V},setup(t,{emit:o}){const c=e.computed(()=>t.disabled??!1),r=e.computed(()=>{const i=[];return(t.value||"").split("").forEach((h,p)=>{h==="1"&&i.push(p)}),i}),s=e.ref(!1),f=e.ref([]),l=e.ref(!1),a=e.ref(k),n=e.ref(k),_=e.computed(()=>l.value?[...r.value,...f.value]:[...r.value.filter(i=>!f.value.includes(i))]),m=e.ref({left:"0px",top:"0px",show:!1,id:0}),g=e.ref(!1);function ne(i){g.value=!0,s.value=!0,m.value.show=!1,l.value=!r.value.includes(i),a.value=B(i)}function ae(i){s.value=!1;let d="";if(g.value&&typeof i=="number"){const h=r.value.indexOf(i);let p=[...r.value];h<0?p.push(i):p=p.filter(v=>v!==i),d=T(p)}else d=T(_.value),f.value=[],n.value=k,a.value=k;d!==t.value&&(o("update:value",d),o("change",d))}function ie(){m.value.show=!1}function le(i,d){if(g.value=!1,m.value={...d,show:!s.value,id:i},!s.value||n.value===i)return;n.value=B(i);const h=Math.abs(a.value.col-n.value.col)+1;let p=[],v=Math.min(a.value.row,n.value.row);const de=Math.min(a.value.col,n.value.col),ce=Math.max(a.value.row,n.value.row);for(;v<=ce;){const se=Array.from({length:h}).map((me,pe)=>v*b+de+pe);p=[...p,...se],v++}f.value=p}function re(){o("update:value",y),o("change",y)}function T(i){const d=Array(...A);return i.forEach(h=>{d[h]="1"}),d.join("")}return{disabled:c,handleMousedown:ne,handleMouseup:ae,handleMouseout:ie,handleMouseover:le,showTooltip:m,currentSelected:_,Time:F,Week:C,getFullWeekAndTime:D,handleReset:re}}}),N=()=>{e.useCssVars(t=>({e01fbdd0:t.showTooltip.left,"4ef75a24":t.showTooltip.top}))},S=M.setup;M.setup=S?(t,o)=>(N(),S(t,o)):N;const fe="",x=t=>(e.pushScopeId("data-v-3b14c67e"),t=t(),e.popScopeId(),t),G={class:"time-calender-container"},R={class:"time-calender"},j={class:"header-info"},I=x(()=>e.createElementVNode("div",{class:"text-center info-grid week-label"}," 星期\\时间 ",-1)),P={class:"info-grid-container",style:{width:"100%",background:"#f2f4f5"}},L=x(()=>e.createElementVNode("div",{class:"text-center info-grid time-info"}," 00:00 - 12:00 ",-1)),U=x(()=>e.createElementVNode("div",{class:"text-center info-grid time-info"}," 12:00 - 24:00 ",-1)),q={class:"time-label-container"},H={class:"time-container"},J={class:"week-label-container"},K={class:"label"},Q=x(()=>e.createElementVNode("div",{class:"arrow"},null,-1)),X={class:"tip-container"},Y={class:"row middle between"},Z=e.createStaticVNode('<div class="col" data-v-3b14c67e><div class="row middle" data-v-3b14c67e><div class="col" data-v-3b14c67e>已选择时间段:</div><div class="col" data-v-3b14c67e><span class="demo-time-grid active" data-v-3b14c67e></span> 选中 </div><div class="col" data-v-3b14c67e><span class="demo-time-grid" data-v-3b14c67e></span> 未选中 </div></div></div>',1),ee={class:"col"};function te(t,o,c,r,s,f){const l=e.resolveComponent("WeekCalenderGrid");return e.openBlock(),e.createElementBlock("div",G,[e.createElementVNode("div",R,[e.createElementVNode("div",j,[I,e.createElementVNode("div",P,[L,U,e.createElementVNode("div",q,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.Time,a=>(e.openBlock(),e.createElementBlock("div",{key:a,class:"time-label"},e.toDisplayString(a),1))),128))])])]),e.createElementVNode("div",H,[e.createElementVNode("div",J,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.Week,a=>(e.openBlock(),e.createElementBlock("div",{key:a,class:"text-center week-label info-grid"},e.toDisplayString(a),1))),128))]),e.createElementVNode("div",{class:"time-grid-container",onMouseleave:o[0]||(o[0]=a=>t.handleMouseup())},[t.disabled?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(Array.from({length:7*24*2}),(a,n)=>(e.openBlock(),e.createBlock(l,{id:n,key:n,selected:t.currentSelected},null,8,["id","selected"]))),128)):(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(Array.from({length:7*24*2}),(a,n)=>(e.openBlock(),e.createBlock(l,{id:n,key:n,selected:t.currentSelected,onMouseOver:t.handleMouseover,onMouseOut:t.handleMouseout,onMouseDown:t.handleMousedown,onMouseUp:t.handleMouseup},null,8,["id","selected","onMouseOver","onMouseOut","onMouseDown","onMouseUp"]))),128)),e.createElementVNode("div",{class:"tooltip",style:e.normalizeStyle({display:t.showTooltip.show?"block":"none"})},[e.createElementVNode("div",K,e.toDisplayString(t.getFullWeekAndTime(t.showTooltip.id)),1),Q],4)],32)])]),e.createElementVNode("div",X,[e.createElementVNode("div",Y,[Z,e.createElementVNode("div",ee,[e.createElementVNode("a",{type:"link",onClick:o[1]||(o[1]=a=>t.handleReset())}," 清除全部 ")])])])])}const oe=$(M,[["render",te],["__scopeId","data-v-3b14c67e"]]);u.WeekCalender=oe,u.WeekCalenderGrid=V,Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})});
