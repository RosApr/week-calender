(function(p,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(p=typeof globalThis<"u"?globalThis:p||self,e(p.WeekCalender={},p.Vue))})(this,function(p,e){"use strict";const B=["\u661F\u671F\u4E00","\u661F\u671F\u4E8C","\u661F\u671F\u4E09","\u661F\u671F\u56DB","\u661F\u671F\u4E94","\u661F\u671F\u516D","\u661F\u671F\u65E5"],T=Array.from({length:24}).map((o,t)=>t),k=48,y="0".repeat(k*7),D=y.split("");function A(o){const t=o/2;return o%2===0?`${w(t)}:00 ~ ${w(t)}:30`:`${w(Math.floor(t))}:30 ~ ${w(Math.ceil(t))}:00`}function O(o){const t=Math.floor(o/k)+1,i=A(o%k);return`${B[t-1]} - ${i}`}function w(o){return o<10?`0${o}`:o}function $(o){const t=Math.floor(o/k);return{row:t,col:o-t*k}}const M={row:void 0,col:void 0},W=e.defineComponent({name:"WeekCalenderGrid",props:{id:{type:Number,required:!0},selected:{type:Array,default:[]}},emits:["mouseOver","mouseDown","mouseOut","mouseUp","click"],setup(o,{emit:t}){const i=e.computed(()=>o.selected.includes(o.id));function r(n,E){const m=n.target.getBoundingClientRect(),_={left:m.left-75+6+"px",top:m.top-window.screenTop-35-5+"px"};t("mouseOver",E,_)}function c(){t("mouseOut")}function f(n){t("mouseDown",n)}function a(n){t("mouseUp",n)}function s(n){t("click",n)}return{isActive:i,handleMouseout:c,handleMouseover:r,handleMousedown:f,handleMouseup:a,handleClick:s}}}),fe="",V=(o,t)=>{const i=o.__vccOpts||o;for(const[r,c]of t)i[r]=c;return i};function R(o,t,i,r,c,f){return e.openBlock(),e.createElementBlock("div",{onMousedown:t[0]||(t[0]=a=>o.handleMousedown(o.$props.id)),onMouseover:t[1]||(t[1]=a=>o.handleMouseover(a,o.$props.id)),onMouseout:t[2]||(t[2]=(...a)=>o.handleMouseout&&o.handleMouseout(...a)),onMouseup:t[3]||(t[3]=a=>o.handleMouseup(o.$props.id)),onClick:t[4]||(t[4]=a=>o.handleClick(o.$props.id)),class:e.normalizeClass(["time-grid",{active:o.isActive}])},null,34)}const G=V(W,[["render",R],["__scopeId","data-v-41ab9ecf"]]),C=e.defineComponent({name:"WeekCalender",props:{value:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["update:value","change"],components:{weekCalenderGrid:G},setup(o,{emit:t}){const i=e.computed(()=>{var l;return(l=o.disabled)!=null?l:!1}),r=e.computed(()=>{const l=[];return(o.value||"").split("").forEach((h,u)=>{h==="1"&&l.push(u)}),l}),c=e.ref(!1),f=e.ref([]),a=e.ref(!1),s=e.ref(M),n=e.ref(M),E=e.computed(()=>a.value?[...r.value,...f.value]:[...r.value.filter(l=>!f.value.includes(l))]),m=e.ref({left:"0px",top:"0px",show:!1,id:0}),_=e.ref(!1);function le(l){_.value=!0,c.value=!0,m.value.show=!1,a.value=!r.value.includes(l),s.value=$(l)}function se(l){c.value=!1;let d="";if(_.value&&typeof l=="number"){const h=r.value.indexOf(l);let u=[...r.value];h<0?u.push(l):u=u.filter(v=>v!==l),d=S(u)}else d=S(E.value),f.value=[],n.value=M,s.value=M;d!==o.value&&(t("update:value",d),t("change",d))}function ae(){m.value.show=!1}function re(l,d){if(_.value=!1,m.value={...d,show:!c.value,id:l},!c.value||n.value===l)return;n.value=$(l);const h=Math.abs(s.value.col-n.value.col)+1;let u=[],v=Math.min(s.value.row,n.value.row);const ie=Math.min(s.value.col,n.value.col),ce=Math.max(s.value.row,n.value.row);for(;v<=ce;){const ue=Array.from({length:h}).map((he,pe)=>v*k+ie+pe);u=[...u,...ue],v++}f.value=u}function de(){t("update:value",y),t("change",y)}function S(l){const d=Array(...D);return l.forEach(h=>{d[h]="1"}),d.join("")}return{disabled:i,handleMousedown:le,handleMouseup:se,handleMouseout:ae,handleMouseover:re,showTooltip:m,currentSelected:E,Time:T,Week:B,getFullWeekAndTime:O,handleReset:de}}}),b=()=>{e.useCssVars(o=>({d072781e:o.showTooltip.left,fe770faa:o.showTooltip.top}))},N=C.setup;C.setup=N?(o,t)=>(b(),N(o,t)):b;const me="",g=o=>(e.pushScopeId("data-v-415e5aa4"),o=o(),e.popScopeId(),o),P={class:"time-calender-container"},I={class:"time-calender"},j={class:"header-info"},L=g(()=>e.createElementVNode("div",{class:"text-center info-grid week-label"}," \u661F\u671F\\\u65F6\u95F4 ",-1)),U={class:"info-grid-container",style:{width:"100%",background:"#f2f4f5"}},q=g(()=>e.createElementVNode("div",{class:"text-center info-grid time-info"}," 00:00 - 12:00 ",-1)),z=g(()=>e.createElementVNode("div",{class:"text-center info-grid time-info"}," 12:00 - 24:00 ",-1)),H={class:"time-label-container"},J={class:"time-container"},K={class:"week-label-container"},Q={class:"label"},X=g(()=>e.createElementVNode("div",{class:"arrow"},null,-1)),Y={class:"tip-container"},Z={class:"row middle between"},x=e.createStaticVNode('<div class="col" data-v-415e5aa4><div class="row middle" data-v-415e5aa4><div class="col" data-v-415e5aa4>\u5DF2\u9009\u62E9\u65F6\u95F4\u6BB5:</div><div class="col" data-v-415e5aa4><span class="demo-time-grid active" data-v-415e5aa4></span> \u9009\u4E2D </div><div class="col" data-v-415e5aa4><span class="demo-time-grid" data-v-415e5aa4></span> \u672A\u9009\u4E2D </div></div></div>',1),ee={class:"col"};function oe(o,t,i,r,c,f){const a=e.resolveComponent("weekCalenderGrid");return e.openBlock(),e.createElementBlock("div",P,[e.createElementVNode("div",I,[e.createElementVNode("div",j,[L,e.createElementVNode("div",U,[q,z,e.createElementVNode("div",H,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.Time,s=>(e.openBlock(),e.createElementBlock("div",{key:s,class:"time-label"},e.toDisplayString(s),1))),128))])])]),e.createElementVNode("div",J,[e.createElementVNode("div",K,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.Week,s=>(e.openBlock(),e.createElementBlock("div",{key:s,class:"text-center week-label info-grid"},e.toDisplayString(s),1))),128))]),e.createElementVNode("div",{class:"time-grid-container",onMouseleave:t[0]||(t[0]=s=>o.handleMouseup())},[o.disabled?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(Array.from({length:7*24*2}),(s,n)=>(e.openBlock(),e.createBlock(a,{id:n,key:n,selected:o.currentSelected},null,8,["id","selected"]))),128)):(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(Array.from({length:7*24*2}),(s,n)=>(e.openBlock(),e.createBlock(a,{id:n,key:n,selected:o.currentSelected,onMouseOver:o.handleMouseover,onMouseOut:o.handleMouseout,onMouseDown:o.handleMousedown,onMouseUp:o.handleMouseup},null,8,["id","selected","onMouseOver","onMouseOut","onMouseDown","onMouseUp"]))),128)),e.createElementVNode("div",{class:"tooltip",style:e.normalizeStyle({display:o.showTooltip.show?"block":"none"})},[e.createElementVNode("div",Q,e.toDisplayString(o.getFullWeekAndTime(o.showTooltip.id)),1),X],4)],32)])]),e.createElementVNode("div",Y,[e.createElementVNode("div",Z,[x,e.createElementVNode("div",ee,[e.createElementVNode("a",{type:"link",onClick:t[1]||(t[1]=s=>o.handleReset())}," \u6E05\u9664\u5168\u90E8 ")])])])])}const F=V(C,[["render",oe],["__scopeId","data-v-415e5aa4"]]),te={install(o){o.component(F.name,F)}},ne={install(o){o.use(te)}};p.WeekCalender=F,p.WeekCalenderPlugin=ne,Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
